"use strict";define("VSSUI",["require","exports","react","VSS/Core/EventManagement","VSS/Core/Observable","VSS/Core/Util/String"],function(e,t,i,s,n,r){var o,l,a;o=t.ResourcesSplitter={},Object.defineProperty(t,"__esModule",{value:!0}),t.ResourcesSplitter.ExpandTooltip="Show more information",t.ResourcesSplitter.SplitterValueText="Pane width {0} pixels",function(e){l=t.ComponentsSplitterSplitter={},Object.defineProperty(t,"__esModule",{value:!0});const a=20,d=4,p=38;class h extends i.Component{constructor(e,t){super(e,t),this._cachedNearElement=null,this._cachedFarElement=null,this.events=new s.EventManagement,this.uncontrolledFixedSize=new n.ObservableValue(void 0),this.placeholderPosition=new n.ObservableValue(void 0),this.collapse=(()=>{this.isCollapsed()||this.props.onCollapsedChanged&&this.props.onCollapsedChanged(!0)}),this.expand=(()=>{this.isCollapsed()&&this.props.onCollapsedChanged&&this.props.onCollapsedChanged(!1)}),this._onDividerKeyDown=(e=>{const{disabled:t,splitterDirection:i}=this.props;if(!t&&!this._isDragging()){switch(e.keyCode){case 37:0===i&&this._moveDivider(-a);break;case 39:0===i&&this._moveDivider(a);break;case 38:1===i&&this._moveDivider(-a);break;case 40:1===i&&this._moveDivider(a);break;default:return}e.preventDefault(),e.stopPropagation()}}),this._onDividerMouseDown=(e=>{this._fixedRef&&!this.props.disabled&&(e.preventDefault(),e.stopPropagation(),this._dragAnchorPos=this._getEventBoundedClientPos(e),this._previousFixedSize=this._getElementSize(this._fixedRef),void 0!==this.placeholderPosition.value&&(this.placeholderPosition.value=void 0),this._attachWindowEvents(),this._handleDragMouseEvent(e))}),this._onDividerMouseMove=(e=>{this._handleDragMouseEvent(e)}),this._onDividerMouseUp=(e=>{this._detachWindowEvents();const t=this._getEventBoundedClientPos(e),i=this._getNewFixedSize(this._previousFixedSize,t-this._dragAnchorPos);this.placeholderPosition.value=void 0,this._setFixedSize(i),this._fireWindowResize()}),this.uncontrolledFixedSize.value=e.initialFixedSize}componentDidMount(){this._fireWindowResize()}componentWillUnmount(){this.events.removeAllListeners()}render(){const{className:e,collapsed:s,fixedElement:n,maxFixedSize:r,minFixedSize:o,onRenderFarElement:l,onRenderNearElement:a,splitterDirection:d}=this.props,h=0===n?!!a:!!l;return i.createElement(t.Observer.Observer,{collapsed:s,fixedSize:void 0===this.props.fixedSize?this.uncontrolledFixedSize:this.props.fixedSize,placeholderPosition:this.placeholderPosition},s=>{let n;if(s.collapsed)n=p;else if(s.fixedSize){n=Math.max(s.fixedSize,o||0);let e=r;!e&&this._splitterContainer&&(e=this._getElementSize(this._splitterContainer)),e&&n>e&&(n=e)}else void 0!==o?n=o:void 0!==r&&(n=r);return i.createElement("div",{className:t.Util.css(e,"vss-Splitter--container",0===d&&"vss-Splitter--container-row",1===d&&"vss-Splitter--container-column",this._isDragging()&&"vss-Splitter--container-dragging"),ref:e=>this._splitterContainer=e},this._renderNearElement(n),h?this._renderDivider(n):null,this._renderDragPlaceHolder(),this._renderFarElement(n))})}_renderNearElement(e){const{fixedElement:t,onRenderNearElement:i,nearElementClassName:s}=this.props;if(!this._isDragging()||!this._cachedNearElement)if(i){const n=i();this._cachedNearElement=0===t?this._renderFixedPane(n,s,e):this._renderFlexiblePane(n,s)}else this._cachedNearElement=null;return this._cachedNearElement}_renderFarElement(e){const{fixedElement:t,onRenderFarElement:i,farElementClassName:s}=this.props;if(!this._isDragging()||!this._cachedFarElement)if(i){const n=i();this._cachedFarElement=1===t?this._renderFixedPane(n,s,e):this._renderFlexiblePane(n,s)}else this._cachedFarElement=null;return this._cachedFarElement}_renderFixedPane(e,s,n){const{expandTooltip:r,splitterDirection:l}=this.props,a=this.isCollapsed(),d={[0===l?"width":"height"]:void 0===n?"50%":n};return e?i.createElement("div",{className:t.Util.css("vss-Splitter--pane-fixed",a?"flex-column collapsed":s),id:t.Util.getSafeId("splitter-fixed-pane"),style:d,ref:e=>this._fixedRef=e},a?i.createElement(t.Button.Button,{className:"vss-splitter-expand-button",iconProps:{iconName:this.getCollapsedButtonIconName()},onClick:this.expand,subtle:!0,tooltipProps:{text:r||o.ExpandTooltip}}):e):null}getCollapsedButtonIconName(){const e=1===this.props.fixedElement;return 0===this.props.splitterDirection?e?"DoubleChevronLeft":"DoubleChevronRight":e?"DoubleChevronUp":"DoubleChevronDown"}_renderFlexiblePane(e,s){return i.createElement("div",{className:t.Util.css("vss-Splitter--pane-flexible",s)},e)}_renderDivider(e){const{startBound:s,endBound:n}=this._getSplitterBoundaries();return i.createElement("div",{"aria-valuemin":s,"aria-valuemax":n,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabel?void 0:this.props.ariaLabelledBy?this.props.ariaLabelledBy:t.Util.getSafeId("splitter-fixed-pane"),"aria-orientation":1===this.props.splitterDirection?"horizontal":"vertical","aria-valuenow":e,"aria-valuetext":e?r.format(o.SplitterValueText,e):void 0,role:"separator",tabIndex:0,className:t.Util.css("vss-Splitter--divider",this._isDragging()&&"vss-Splitter--divider-dragging"),onKeyDown:this._onDividerKeyDown,onMouseDown:this._onDividerMouseDown})}_renderDragPlaceHolder(){if(this._isDragging()){const e={[0===this.props.splitterDirection?"left":"top"]:this.placeholderPosition.value};return i.createElement("div",{className:"vss-Splitter--drag-placeholder",style:e})}return null}_handleDragMouseEvent(e){const{fixedElement:t}=this.props;e.preventDefault(),e.stopPropagation();const i=this._getEventBoundedClientPos(e),s=this._getNewFixedSize(this._previousFixedSize,i-this._dragAnchorPos),n=s.collapsed?0:s.fixedSize,r=0===t?n:this._getElementSize(this._splitterContainer)-n-d;r!==this.placeholderPosition.value&&(this.placeholderPosition.value=r)}_setFixedSize(e){const{onFixedSizeChanged:t}=this.props;if(e.collapsed)return void this.collapse();const i=e.fixedSize;this.uncontrolledFixedSize.value=i,t&&t(i),this.isCollapsed()&&this.expand()}_moveDivider(e){const t=this._getElementSize(this._fixedRef),i=this._getNewFixedSize(t,e);this._setFixedSize(i),this._fireWindowResize()}_attachWindowEvents(){this.events.addEventListener(window,"mousemove",this._onDividerMouseMove),this.events.addEventListener(window,"mouseup",this._onDividerMouseUp)}_detachWindowEvents(){this.events.removeEventListener(window,"mousemove",this._onDividerMouseMove),this.events.removeEventListener(window,"mouseup",this._onDividerMouseUp)}_getEventBoundedClientPos(e){const{splitterDirection:t}=this.props;let i;switch(t){case 0:i=e.clientX;break;case 1:i=e.clientY;break;default:i=0}return this._getBoundedClientPos(i)}_getBoundedClientPos(e){const{startBound:t,endBound:i}=this._getSplitterBoundaries(!!this.props.onCollapsedChanged);return Math.max(t,Math.min(e,i))-this._getElementStartPos(this._splitterContainer)}_getSplitterBoundaries(e=!1){let{fixedElement:t,minFixedSize:i,maxFixedSize:s}=this.props;if(!this._splitterContainer)return{startBound:0,endBound:0};e&&(i=0);const n=this._getElementStartPos(this._splitterContainer),r=n+this._getElementSize(this._splitterContainer);return{startBound:0===t?i?n+i:n:s?r-s:n,endBound:0===t?s?n+s:r:i?r-i:r}}_getNewFixedSize(e,t){let{fixedElement:i,maxFixedSize:s,minFixedSize:n=0,onCollapsedChanged:r}=this.props;void 0===s&&(s=this._getElementSize(this._splitterContainer));let o=t;1===i&&(o*=-1);let l=e+o;l>s&&(l=s);let a=this.isCollapsed();return r&&(a=l<p||!this.isCollapsed()&&l<n),l<n&&(l=n),{fixedSize:l,collapsed:a}}isCollapsed(){return!!n.ObservableLike.getValue(this.props.collapsed)}_isDragging(){return void 0!==this.placeholderPosition.value}_getElementSize(e){return 0===this.props.splitterDirection?e.clientWidth:e.clientHeight}_getElementStartPos(e){const t=e.getBoundingClientRect();return 0===this.props.splitterDirection?t.left:t.top}_fireWindowResize(){const e=document.createEvent("Event");e.initEvent("resize",!1,!0),window.dispatchEvent(e)}}h.defaultProps={fixedElement:1,splitterDirection:0},t.ComponentsSplitterSplitter.Splitter=h}(),function(e){a=t[e]={},Object.defineProperty(t,"__esModule",{value:!0}),function(i){for(var s in i)t[e].hasOwnProperty(s)||(t[e][s]=i[s])}(l)}("ComponentsSplitterindex"),function(e){t[e]={},Object.defineProperty(t,"__esModule",{value:!0}),function(i){for(var s in i)t[e].hasOwnProperty(s)||(t[e][s]=i[s])}(a)}("Splitter")},["Resources.Splitter","Components/Splitter/Splitter","Components/Splitter/index","Splitter"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-features.ui-splitter-content"}}));